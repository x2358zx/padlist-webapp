\
* { box-sizing: border-box; }
html, body { margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans TC", "PingFang TC", "Microsoft JhengHei", Arial, sans-serif; }
.container { max-width: 1300px; margin: 0 auto; padding: 16px; }
header { display:flex; align-items:center; gap:16px; margin-bottom: 12px; }
.title { font-weight: 700; font-size: 18px; }
.version-badge { display:flex; align-items:center; gap:6px; padding:4px 8px; background:#f5f5f5; border:1px solid #ddd; border-radius:6px; color:#555; }
.version-badge .icon { font-size:12px; }
.nowtime { margin-left:auto; color:#777; font-size:12px; }

main { display:grid; grid-template-columns: 420px 1fr; gap: 16px; }
.left-pane .controls, .coord-controls, .section, .notice { background:#fff; border:1px solid #e5e5e5; padding:10px 12px; border-radius:10px; margin-bottom:12px; }
.status { margin-bottom:6px; font-weight:600; }
.status.normal { color:#1b66d1; }
.status.error { color:#d11b1b; white-space: pre-wrap; }

.left-pane .row { display:flex; align-items:center; gap:8px; margin-bottom:8px; }
.left-pane .row.group { flex-direction:column; align-items:flex-start; gap:4px; }
.left-pane input[type="text"], .left-pane input[type="number"], select { border:1px solid #ccc; border-radius:8px; padding:6px 8px; width: 140px; }
.left-pane .btn { display:inline-flex; align-items:center; gap:8px; }
.left-pane .file-btn { background:#222; color:white; border-radius:8px; padding:8px 12px; cursor:pointer; }
.left-pane button { background:#0d6efd; color:white; border:none; padding:8px 10px; border-radius:8px; cursor:pointer; }
.left-pane button:hover { opacity:0.9; }
.zoom-row input[type="range"] { width: 200px; }

.section-title { font-weight:700; margin-bottom:8px; }
.grid-2 { display:grid; grid-template-columns: 1fr 1fr; gap:6px 10px; }

.notice ul { margin:0; padding-left:20px; }

.right-pane .project-code { margin-bottom: 8px; }
#stageWrapper { border:1px solid #e1e1e1; border-radius:12px; padding:8px; background:#fafafa; width: fit-content; }
.stage { position: relative; width:800px; height:900px; background:white; overflow:hidden; transform-origin: 0 0; }
.chip-image {
  position: absolute;   /* 一定要是 absolute */
  /* left/top 會被你那段 JS 置中計算覆寫 */
}

.overlay { position:absolute; left:0; top:0; pointer-events:none; }

.pin-label, .pin-input { position:absolute; font-size:12px; }
.pin-label { width:20px; height:20px; display:flex; align-items:center; justify-content:center; border-radius:4px; }
.pin-input { width:80px; height:20px; border:1px solid #ccc; border-radius:4px; padding:2px 6px; }

/* 顏色 */
.bg-blue { background:#add8e6; }  /* 淺藍 */
.bg-gray { background:#dcdcdc; }  /* 灰 */
.bg-green { background:#90ee90; } /* 淺綠 */
.bg-pink { background:#ffc0cb; }  /* 粉紅 */

.actions { margin-top: 10px; }
.invalid-list pre { min-height: 80px; max-height: 200px; overflow:auto; background:#fff7f7; padding:8px; border:1px solid #ffd6d6; border-radius:8px; }

/* 旋轉的上/下邊欄位 */
.rotate90 { transform: rotate(90deg); transform-origin:left top; }

/* 用於截圖的替身盒子（只在複製/下載時使用） */
/* 取代原本的 .pin-input：不可編輯的方塊 */
.pin-box{
  position: absolute;
  width: 80px;
  height: 20px;
  border: 1px solid #ccc;
  border-radius: 4px;
  background: #fff;
  font-size: 12px;
  line-height: 20px;        /* 垂直置中 */
  text-align: center;       /* 水平置中 */
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  z-index: 10;
}

/* 旋轉（頂/底那排用） */
.pin-box.rotate90{
  transform: rotate(90deg);
  transform-origin: left top;
}

/* 顏色規則（沿用你原本的判斷） */
.pin-box.bg-gray { background: #dcdcdc; }
.pin-box.bg-green{ background: #90ee90; }
.pin-box.bg-pink { background: #ffc0cb; }
.pin-box.bg-blue { background: #add8e6; }

/* 若你有分邊位移（只影響畫面，不影響截圖），保留原本的 side-* 規則即可 */

/* 先隱藏圖片，等成功載入再顯示 */
.chip-image { display: none; position: absolute; }
.chip-image.loaded { display: block; }

.version-badge {
  display: inline-flex;           /* 讓文字和小圖示更居中 */
  align-items: center;
  gap: 4px;                       /* 圖示和文字之間的間距 */
  font-size: 13px;
  font-weight: 500;               /* 字稍微加粗，看起來更清晰 */
  color: #fff;                    /* 白字 */
  background: linear-gradient(135deg, #4CAF50, #2E7D32); /* 綠色漸層 */
  padding: 4px 10px;              /* 上下 4px、左右 10px，讓 badge 比較圓潤 */
  border-radius: 999px;           /* 超圓角，做成膠囊狀 */
  box-shadow: 0 2px 4px rgba(0,0,0,0.1); /* 輕微陰影 */
  transition: background 0.3s ease;
}

.version-badge:hover {
  background: linear-gradient(135deg, #66BB6A, #388E3C); /* hover 更亮一點 */
}

/* 讓 stage 成為定位容器 */
#stage, .stage { position: relative; }

/* === 底部 HUD：統一高度、完美對齊 === */
.stage-hud{
  /* 已在底部：left/right/bottom 請保留你的設定 */
  position: absolute;
  left: 8px; right: 8px; bottom: 8px;

  display: flex;
  align-items: stretch;      /* 讓每個 item 拉到同高 */
  justify-content: space-between;
  gap: 8px;
  z-index: 20;
  pointer-events: none;
}

/* 膠囊本體：固定高度，文字垂直置中 */
.stage-hud .hud-item{
  display: flex;
  align-items: center;
  height: 34px;              /* ← 統一高度（想更厚可調 36/38） */
  box-sizing: border-box;
  padding: 0 12px;           /* 垂直用 0，文字自然置中 */
  line-height: 1;            /* 避免行高影響觀感 */
  font-size: 12px;           /* 兩邊字體一致 */
  background: rgba(255,255,255,0.92);
  border: 1px solid #ddd;
  border-radius: 999px;      /* 更圓潤的膠囊 */
  color: #333;
  box-shadow: 0 1px 2px rgba(0,0,0,0.06);
  pointer-events: auto;
}

/* Project Code 區可伸縮，長字用省略號 */
.stage-hud .project-code{
  flex: 1;
  min-width: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.stage-hud .project-code span{ margin-right: 6px; opacity: .7; }

/* 時間固定寬度、不被擠壓 */
.stage-hud .nowtime{ flex: 0 0 auto; }

/* 避免繼承到 header 的 margin 規則 */
.stage .nowtime, .stage .project-code { margin: 0; }

/* （可選）在畫布內預留空間，避免視覺壓住底部內容 */
.stage { padding-bottom: 44px; }
